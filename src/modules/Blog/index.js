import React, { Fragment } from 'react'

import SEO from '../components/seo'
import {
  BaseBlogs,
  Post,
  BaseListNote,
  BaseIBlogPosts,
  TitleNotes,
  TitlePost,
  BaseTimePost,
  SpoilerPost,
} from './styles'
import Header from './Header'

export default function Blog({ data }) {
  const { allMarkdownRemark: posts, site } = data
  const { siteMetadata } = site

  return (
    <Fragment>
      <SEO
        title={`${siteMetadata.author} â€” Some study notes by me`}
        description={siteMetadata.tagline}
        slug="/blog"
      />
      <Header />
      <BaseBlogs>
        <BaseIBlogPosts>
          <TitleNotes className="font-sniglet">
            here&apos;s are my notes
          </TitleNotes>
          <BaseListNote>
            {posts.edges.map(({ node }) => (
              <ItemPost key={node.id} {...node} />
            ))}
          </BaseListNote>
        </BaseIBlogPosts>
      </BaseBlogs>
    </Fragment>
  )
}

function ItemPost({ frontmatter, timeToRead, fileAbsolutePath }) {
  const { title, date } = frontmatter
  const splitFilePath = fileAbsolutePath.split('/')
  const path = splitFilePath[splitFilePath.length - 2]

  return (
    <Post to={`/blog/${path}`}>
      <TitlePost className="font-reenie">{date}</TitlePost>
      <SpoilerPost className="font-reenie">{title}</SpoilerPost>
      <BaseTimePost className="font-reenie">{timeToRead} min read</BaseTimePost>
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 776 772"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M684.061 359.808C688.99 510.292 702.607 595.94 727.44 750.002C727.732 751.812 726.353 753.494 724.52 753.516L547.25 755.606L360 762C289.489 764.969 251.138 766.462 185.5 767.5L140.375 766.125L117.812 765.438L95.4871 764.757C95.3293 764.752 95.1695 764.735 95.0145 764.705C78.2361 761.494 68.6936 758.027 51.6798 745.136C51.5619 745.047 51.4474 744.946 51.3441 744.84C34.7681 727.832 23.475 710.922 15.5 686L15.375 540.747L15.25 395.495C18.933 282.097 18.2873 217.793 5.36481 103.695C5.16999 101.975 6.53256 100.411 8.26156 100.325C221.175 89.7272 258.263 111.455 339.463 107.978C420.932 111.873 527.224 105.149 680.804 93.2525C682.547 93.1175 684.061 94.4935 684.061 96.2418V359.808Z"
          fill="#FFE479"
        />
        <path
          d="M15.5 686C23.475 710.922 34.7681 727.832 51.3441 744.84C51.4474 744.946 51.5619 745.047 51.6798 745.136C68.6936 758.027 78.2361 761.494 95.0145 764.705C95.1695 764.735 95.3293 764.752 95.4871 764.757L117.812 765.438L140.375 766.125M15.5 686L15.375 540.747L15.25 395.495C18.933 282.097 18.2873 217.793 5.36481 103.695C5.16999 101.975 6.53256 100.411 8.26156 100.325C221.175 89.7272 258.263 111.455 339.463 107.978C420.932 111.873 527.224 105.149 680.804 93.2525C682.547 93.1175 684.061 94.4935 684.061 96.2418V359.808C688.99 510.292 702.607 595.94 727.44 750.002C727.732 751.812 726.353 753.494 724.52 753.516L547.25 755.606L360 762C289.489 764.969 251.138 766.462 185.5 767.5L140.375 766.125M15.5 686C45.7953 691.143 66.3159 694.916 86.6374 685.841C88.9418 684.812 91.7289 686.723 91.5962 689.243C90.5999 708.169 96.7493 737.884 112.558 749.677C112.849 749.894 113.108 750.164 113.311 750.465C122.984 764.797 129.07 763.681 140.375 766.125"
          stroke="#4B474C"
          strokeWidth="9"
        />
        <path
          d="M35.5 224.5C152.685 215.805 221.442 215.564 350.25 224.5C471.365 228.587 540.254 228.644 665 224.5"
          stroke="#4B474C"
          strokeWidth="5"
        />
        <path
          d="M443.467 64.4722L418.134 66.0094C418.058 66.0141 418.015 66.0994 418.057 66.1636L424.276 75.7615L432.177 89.3114C432.214 89.3758 432.171 89.4571 432.096 89.4616L415.142 90.4904L401.249 93.3228C401.16 93.3409 401.139 93.4587 401.217 93.5061L717.271 286.599C717.357 286.651 717.458 286.558 717.412 286.468L704.664 261.407C704.628 261.337 704.684 261.256 704.762 261.263L731.729 263.62C731.811 263.627 731.866 263.538 731.823 263.468L717.734 240.374C717.691 240.304 717.746 240.216 717.828 240.223L744.755 242.577C744.841 242.584 744.896 242.488 744.845 242.418L729.505 221.446C729.454 221.377 729.509 221.28 729.594 221.287L756.499 223.64C756.585 223.647 756.639 223.55 756.589 223.481L741.227 202.479C741.18 202.415 741.223 202.325 741.302 202.32L770.759 200.532C770.856 200.527 770.888 200.399 770.805 200.348L456.072 5.16576C455.989 5.11436 455.889 5.19987 455.927 5.28968L465.754 28.5337C465.784 28.6043 465.727 28.6808 465.651 28.672L442.967 26.0655C442.883 26.0559 442.825 26.1483 442.871 26.2193L455.267 45.3467C455.313 45.4177 455.255 45.5101 455.171 45.5004L432.487 42.8939C432.411 42.8852 432.354 42.9617 432.384 43.0322L437.322 54.7121C437.324 54.7175 437.327 54.7226 437.33 54.7275L443.545 64.318C443.586 64.3823 443.543 64.4676 443.467 64.4722Z"
          fill="#9E9EE9"
          fillOpacity="0.6"
          stroke="#4B474C"
          strokeWidth="7"
        />
      </svg>
    </Post>
  )
}
