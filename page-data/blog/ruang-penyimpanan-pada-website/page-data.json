{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/ruang-penyimpanan-pada-website","result":{"data":{"markdownRemark":{"html":"<p>Pada tulisan kali ini saya tidak ingin panjang lebar, ya ini adalah tulisan sederhana saja semua orang yang berkesinambungan dengan dunia web pasti tau tentang ruang penyimpanan yang ada pada web, tapi terkadang saya liat kebanyakan orang yang baru menempuh di dunia web mereka hanya berbicara tentang <code class=\"language-text\">localStorage</code> dan biasanya itu digunakan untuk menyimpan berbagai macam hal, ntah itu <code class=\"language-text\">access-token</code> dan juga terkadang menyimpan data penting lainnya, nah kali ini saya akan berbicara tentang <em>best practice</em> atau bisa dibilang kita ngulik lah mekanisme apa sih yang terbaik ketika menggunakan ruang penyimpanan pada web?</p>\n<h2 id=\"macam---macam-penyimpanan\" style=\"position:relative;\"><a href=\"#macam---macam-penyimpanan\" aria-label=\"macam   macam penyimpanan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Macam - macam penyimpanan</h2>\n<p>Ya didalam browser pun ada macam - macam penyimpanan yang disediakan diantaranya adalah;\n<br>\n<br>\n<strong>Session Storage</strong> ini sudah sering kita dengar, jadi jenis penyimpanan ini bisa dibilang adalah penyimpanan yang sementara dan dia ini sifatnya per-tab, maksudnya ialah contoh ketika kalian men-develop web <a href=\"#\">contoh.com</a> nah kalian mencoba menyimpan data dengan metode ini, lalu user akan mengunjuni web kalian dan fungsi untuk menyimpan data dengan metode ini ke-trigger lalu tersimpan lah pada ruang penyimpanan browser, tapi user tersebut mentutup tab-nya, yaudah alhasil data yang seharusnya tersimpan dengan motode ini telah terhapus begitu saja.\nDengan metode ini kalian hanya dibatasi sampai dengan <strong>5MB</strong> saja, dan juga ini sifatnya synchronous artinya ini akan memblock main thread, dan ini akan membuat web tidak performa lagi, dan metode ini tidak bisa di akses <strong>web worker</strong> ataupun <strong>service worker</strong>.\n<br>\n<br>\n<strong>Local Storage</strong> nah ini dia yang sering saya jumpai pada temen - temen yang baru mempelajari ruang penyimpanan pada browser, biasanya mereka menyimpan sebuah <code class=\"language-text\">access_token</code> dengan metode ini dan itu harus dihindari, dan juga ini hanya memiliki maksimal 5MB, dan dengan metode ruang penyimpanan ini sifatnya adalah synchronous yang artinya akan mem-block main thread juga seperti <strong>Session Storage</strong>.\n<br>\n<br>\n<strong>Cookies</strong> kalau ini biasa ada beberapa use case yang digunakan, biasanya untuk menyimpan hal - hal yang tidak begitu banyak gampangnya ini buat nyimpen hal yang tipis - tipis aja, karena ketika kalian menyimpan sesuatu yang lumayan banyak, ini akan mempengaruhi dari segi HTTP request, maksudnya cookies ini akan trus dipanggil di setiap kita melakukan sebuah request maka dari itu sifat dari cookies ini adalah synchoronous dan akan blocking rendering pada main thread.\n<br>\n<br>\n<strong>Native file system</strong> metode penyimpanan ini jujur saya aja tidak pernah pakai, tetapi setelah ngulik sana sini definisi secara umumnya ialah, kita bisa akses ruang penyimpanan dalam storage disk kita dan ini layaknya sebuah native app pada desktop maupun handphone.\n<br>\n<br>\n<strong>WebSQL dan indexedDB</strong> untuk metode WebSQL sendiri hal ini sudah mulai deprecated bahkan dihilangkan dari jagat per-website-an dan sebagai gantinya menggunakan indexedDB, nah indexedDB ini biasanya digunakan untuk menyimpan data yang cukup signifikan ya, contohnya misalkan menyimpan data 100rb list data.</p>\n<h2 id=\"rumus-penyimpanan-yang-umum\" style=\"position:relative;\"><a href=\"#rumus-penyimpanan-yang-umum\" aria-label=\"rumus penyimpanan yang umum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rumus penyimpanan yang umum</h2>\n<p>Hal umum yang biasa digunakan untuk sebuah penyimpanan ialah seperti ini</p>\n<ul>\n<li>Untuk menyimpanan file ntah itu file JS, CSS, atau pun HTML biasanya bisa menggunakan penyimpanan cache.</li>\n<li>dan untuk hal hal umum ntah menyimpan data array object atau apapun itu biasanya menggunakan indexedDB</li>\n</ul>\n<h2 id=\"seberapa-banyak-penyimpanan-yang-dibolehkan\" style=\"position:relative;\"><a href=\"#seberapa-banyak-penyimpanan-yang-dibolehkan\" aria-label=\"seberapa banyak penyimpanan yang dibolehkan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Seberapa banyak penyimpanan yang dibolehkan?</h2>\n<p>Banyak buanget kita bisa menyimpan data - data yang kita inginkan sebanyak apapun, tetapi biasanya di setiap browser itu berbeda, diantaranya</p>\n<ul>\n<li><strong>Google Chrome</strong> akan menyediakan ruang penyimpanan sekitar 60%</li>\n<li><strong>Mozilla</strong> sekitar 2 GB dari setiap origin domain</li>\n<li><strong>Internet Explorer 10 keatas</strong>, hanya sekitar 250MB tetapi kalian akan mendapatkan sebuah warning jika penggunaan sudah mencapai 10MB</li>\n<li><strong>Safari</strong> hanya menyediakan sekitar 2GB, tetapi sekiranya kita melebihi 200MB atau sudah mencapai kapasitas itu, safari akan meminta izin kepada user apakah ruang penyimpanan boleh digunakan lebih dari 200MB.</li>\n</ul>\n<p>kalau dulu browser biasanya hanya menyediakan sekitar 50MB lebih dari itu browser akan memberikan sebuah warning bahwa apakah user mau memperbolehkan ruang penyimpanan lebih dari 50MB, tetapi pada modern browser sekarang secara umuk browser sudah menghilangkan fitur ini, kecuali untuk safari, safari sendiri masih memberikan warning jika user sudah memakai ruang penyimpanan lebih dari sama dengan 750MB dan tentunya dengan maksimal 1.1GB, jika lebih dari ini jangan harap data kalian akan disimpan dengan baik.\n<br>\n<br>\nTerkadang memang mengasyikan menyimpan segala sesuatu didalam browser, nah tetapi kita juga harus mengkhawatirkan ruang penyimpanan tersebut, lalu cara mengecek ruang penyimpanan yang tersedia adalah menggunakan <code class=\"language-text\">StorageManager</code> API, contohnya seperti ini</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>storage <span class=\"token operator\">&amp;&amp;</span> navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>estimate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> quota <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">estimate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> percentageUsed <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>quota<span class=\"token punctuation\">.</span>usage <span class=\"token operator\">/</span> quota<span class=\"token punctuation\">.</span>quota<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token comment\">// persentase penggunaan</span>\n  <span class=\"token keyword\">const</span> remaining <span class=\"token operator\">=</span> quota<span class=\"token punctuation\">.</span>quota <span class=\"token operator\">-</span> quota<span class=\"token punctuation\">.</span>usage <span class=\"token comment\">// ini adalah sisa dari ruang penyimpanan</span>\n\n  <span class=\"token comment\">// secara kasarnya seperti ini</span>\n  <span class=\"token comment\">// quota.usage -> banyaknya data yang digunakan</span>\n  <span class=\"token comment\">// quota.quota -> maksimum data yang bisa digunakan</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Jadi dengan <code class=\"language-text\">StorageManager</code> kalian bisa mengecek berapasih kuota yang tersisa pada ruang penyimpanan yang tersedia? tetapi API <code class=\"language-text\">StorageManager</code> tidak semua browser meng-implementasikan hal ini, kalian juga harus mencegah error tersebut pada masing - masing ruang penyimpanan yang digunakan contohnya\n<br>\n<br>\nCara meng-handle error kapasitas berlebihan jika menggunakan indexedDB</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> idb<span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'idb'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> transaction <span class=\"token operator\">=</span> idb<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'entries'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'readwrite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onabort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> error <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>name <span class=\"token operator\">==</span> <span class=\"token string\">'QuotaExceededError'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// handle kuota yang berlebihan</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Lalu jika pada ruang penyimpanan cache seperti ini</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-cache'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/sample1.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'QuotaExceededError'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// handle kuota yang berlebihan</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lalu apa pentingnya sih meng-handle error kuota yang berlebihan, penting..!! dalam artian kalian sering menggunakan ruang penyimpanan browser, karena kita tidak ingin user mendapatkan error yang tidak diinginkan intinya.</p>\n<h2 id=\"tipe-ruang-penyimpanan\" style=\"position:relative;\"><a href=\"#tipe-ruang-penyimpanan\" aria-label=\"tipe ruang penyimpanan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tipe ruang penyimpanan</h2>\n<p>Tentu pada ruang penyimpanan sebuah browser ada dua tipe yaitu “Best Effort” dan “Persistance” bedanya apa? nah kalau “Best Effor” itu biasanya akan melakukan cleanup otomatis yang dilakukan oleh browser itu sendiri seperti indexedDB, cache storage, local storage dan lain sebagainya. Kalau “Persistance” itu biasaya kita harus meng-hapus secara manual biasanya kita melakukannya melalui settings browser.</p>\n<h2 id=\"penutup\" style=\"position:relative;\"><a href=\"#penutup\" aria-label=\"penutup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Penutup</h2>\n<p>Kalian bebas menggunakan metode ruang penyimpanan apapun tetapi best practicenya ialah adalah menggunakan <strong>Rumus</strong> yang sudah saya kasih tau diatas tadi, dan jika kalian penasaran dengan limit dari ruang penyimpanan browser kalian bisa berkunjung ke <a href=\"https://demo.agektmr.com/storage/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sini</a>.\n<br>\n<br>\nTerima Kasih.</p>","timeToRead":4,"coverImg":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAAByXlQqogU/wD/xAAaEAEAAgMBAAAAAAAAAAAAAAABAhEDISIx/9oACAEBAAEFAoHLSIXjLIy0+//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAAIBBQAAAAAAAAAAAAAAAAABERAhUWGR/9oACAEBAAY/Am8ErslmNTuv/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERITFBkaH/2gAIAQEAAT8hbAdhcBWpnEA6vKPAzob2f//aAAwDAQACAAMAAAAQmz//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QpX//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EINX/8QAHBABAQEBAAIDAAAAAAAAAAAAAREAITFBUaHw/9oACAEBAAE/EEriD96hBUKIeWH6ZC4DiKscFkVPd+GZaCKpPPdQAju//9k=","aspectRatio":1.5037593984962405,"src":"/static/e709925f919ff4308d3aa7feb688e129/f9913/photo-1532884988337-3c5dca28cccc.jpg","srcSet":"/static/e709925f919ff4308d3aa7feb688e129/f836f/photo-1532884988337-3c5dca28cccc.jpg 200w,\n/static/e709925f919ff4308d3aa7feb688e129/2244e/photo-1532884988337-3c5dca28cccc.jpg 400w,\n/static/e709925f919ff4308d3aa7feb688e129/f9913/photo-1532884988337-3c5dca28cccc.jpg 750w","sizes":"(max-width: 750px) 100vw, 750px"}}},"frontmatter":{"date":"29 Jun 2020","title":"Ruang penyimpanan pada website","spoiler":"Apa saja dan apakah ada best practice dalam menyimpan sesuatu pada website?","coverAuthor":"Books on shelf photo by @paucasals on unsplash"}},"site":{"siteMetadata":{"author":"@adibfirman","siteUrl":"https://adibfirman.github.io","name":"Adib Firman"}}},"pageContext":{"pathName":"ruang-penyimpanan-pada-website","id":"411168ef-815c-59f8-ae4e-808520707e0f","nextPost":{"pathName":"blog/web-di-play-store","title":"Web di play store? ini Web atau App?"},"prevPost":null}}}